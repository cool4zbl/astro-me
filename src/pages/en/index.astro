---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import BlogCard from '../../components/BlogCard.astro';
import OptimizedImage from '../../components/OptimizedImage.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const recentPosts = posts
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const bookshelf = [
  { title: 'Reading', items: ['The Innovators', 'Clean Architecture'] },
  { title: 'Finished', items: ['The Three-Body Problem', 'The Pragmatic Programmer'] },
  { title: 'On My List', items: ['Atomic Habits', 'Designing Data-Intensive Applications'] }
];

const musicFavorites = [
  'Galimatias – Night Owl',
  'Bon Iver – Holocene',
  'Ryuichi Sakamoto – Merry Christmas Mr. Lawrence',
  'The 1975 – About You'
];

const hobbyPhotos = [
  {
    src: '/placeholder.jpg',
    alt: 'Morning run',
    caption: 'Workout · Running keeps my head clear and ideas flowing.'
  },
  {
    src: '/placeholder-user.jpg',
    alt: 'Weekend cooking',
    caption: 'Cooking · Slowing down with soups, breakfasts, and playlists.'
  },
  {
    src: '/placeholder.svg?height=220&width=320',
    alt: 'Street photography',
    caption: 'Photography · Collecting light and shadow from quiet corners.'
  }
];
---

<BaseLayout 
  title="My Blog — calm engineering notes"
  description="Thoughts on software, systems, and the habits that keep me curious."
>
  <Header />
  
  <main class="flex-1">
    <section class="section-padding bg-gradient-to-br from-background via-muted/20 to-background">
      <div class="container-width">
        <div class="animate-fade-in mx-auto max-w-3xl space-y-6 text-left sm:text-center">
          <span class="inline-flex items-center gap-2 rounded-full bg-primary/10 px-4 py-2 text-xs font-medium uppercase tracking-[0.25em] text-primary">
            calm engineering · personal notes
          </span>
          <h1 class="text-4xl font-bold leading-tight text-foreground sm:text-5xl">
            Hi, I’m a full-stack developer who cares about steady delivery and clear thinking.
          </h1>
          <p class="text-base leading-relaxed text-muted-foreground sm:text-lg">
            I design reliable backend systems, refine interfaces until they feel obvious, and document the lessons so teammates—and future me—can build without the guesswork.
          </p>
          <div class="flex flex-wrap items-center gap-3 sm:justify-center">
            <a
              href="/en/blog"
              class="inline-flex items-center rounded-full bg-primary px-5 py-2.5 text-sm font-semibold text-primary-foreground shadow-sm transition hover:bg-primary/90"
            >
              Read the Blog
            </a>
            <a
              href="/projects"
              class="inline-flex items-center rounded-full border border-primary/30 px-5 py-2.5 text-sm font-semibold text-primary transition hover:bg-primary/10"
            >
              View Projects <span aria-hidden="true" class="ml-2">→</span>
            </a>
          </div>
        </div>
      </div>
    </section>

    <section class="section-padding">
      <div class="container-width">
        <div class="grid items-center gap-12 lg:grid-cols-2 lg:gap-16">
          <div class="space-y-3 text-sm leading-relaxed text-muted-foreground sm:text-base">
            <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
              What I’m focusing on
            </h2>
            <p>
              Day to day I lead backend efforts with Java and Spring, map out APIs, and smooth sharp edges in the UI. My process leans on docs, pairing, and a good CI pipeline.
            </p>
            <p>
              I enjoy translating complex requirements into calm systems—ones that are observable, easy to reason about, and friendly to maintain after the launch buzz fades.
            </p>
            <p>
              Outside work you’ll catch me annotating books, curating playlists for different moods, or exploring cities with a camera in hand.
            </p>
          </div>
          <div class="relative">
            <div class="aspect-square rounded-2xl bg-gradient-primary p-8 shadow-2xl">
              <div class="flex h-full w-full items-center justify-center rounded-xl bg-background/10 backdrop-blur-sm">
                <OptimizedImage 
                  src="/placeholder.svg?height=300&width=300"
                  alt="Portrait placeholder"
                  width={300}
                  height={300}
                  class="rounded-xl shadow-lg"
                  loading="lazy"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section-padding">
      <div class="container-width space-y-12">
        <div class="space-y-3 text-center">
          <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">Books · Music · Movement · Photos</h2>
          <p class="mx-auto max-w-2xl text-sm leading-relaxed text-muted-foreground sm:text-base">
            The hobbies that keep me balanced and inspired—captured in reading lists, loopable tracks, and snapshots from offline adventures.
          </p>
        </div>

        <div class="grid gap-6 lg:grid-cols-3">
          <div class="rounded-2xl border bg-card/80 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-semibold text-foreground">Bookshelf</h3>
              <span class="text-xs uppercase tracking-wide text-primary/70">notes</span>
            </div>
            <div class="mt-5 space-y-4 text-sm text-muted-foreground">
              {bookshelf.map((shelf) => (
                <div class="rounded-xl bg-muted/60 p-4">
                  <p class="text-xs uppercase tracking-wide text-primary/70">{shelf.title}</p>
                  <ul class="mt-2 space-y-1 text-foreground">
                    {shelf.items.map((item) => (
                      <li class="flex items-center gap-2 text-sm">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary"></span>
                        {item}
                      </li>
                    ))}
                  </ul>
                </div>
              ))}
            </div>
          </div>

          <div class="rounded-2xl border bg-card/80 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-semibold text-foreground">Music</h3>
              <span class="text-xs uppercase tracking-wide text-primary/70">daily vibe</span>
            </div>
            <p class="mt-4 text-sm text-muted-foreground">
              A playlist for deep work, morning coffee, or winding down—depending on the track.
            </p>
            <ul class="mt-5 grid gap-3 text-sm text-foreground">
              {musicFavorites.map((track) => (
                <li class="flex items-center justify-between gap-3 rounded-full border border-primary/30 px-4 py-2">
                  <span class="truncate">{track}</span>
                  <span class="text-xs text-primary/70">loop</span>
                </li>
              ))}
            </ul>
          </div>

          <div class="rounded-2xl border bg-card/80 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-semibold text-foreground">Other Hobbies</h3>
              <span class="text-xs uppercase tracking-wide text-primary/70">snapshots</span>
            </div>
            <div class="mt-5 space-y-4">
              {hobbyPhotos.map((photo) => (
                <figure class="overflow-hidden rounded-xl bg-muted/60">
                  <OptimizedImage src={photo.src} alt={photo.alt} width={320} height={220} class="h-28 w-full object-cover" loading="lazy" />
                  <figcaption class="space-y-1 p-3">
                    <p class="text-sm font-medium text-foreground">{photo.alt}</p>
                    <p class="text-xs leading-relaxed text-muted-foreground">{photo.caption}</p>
                  </figcaption>
                </figure>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section-padding">
      <div class="container-width">
        <div class="mb-12 space-y-3 text-center">
          <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">Latest Posts</h2>
          <p class="mx-auto max-w-2xl text-sm leading-relaxed text-muted-foreground sm:text-base">
            Recent notes on architecture decisions, experiments that worked, and the mindset shifts that helped along the way.
          </p>
        </div>
        <div class="space-y-16">
          {recentPosts.map((post) => (
            <BlogCard post={post} />
          ))}
        </div>
        <div class="mt-10 text-center">
          <a 
            href="/en/blog" 
            class="inline-flex items-center rounded-full border border-secondary px-5 py-2.5 text-sm font-semibold text-secondary-foreground shadow-sm transition hover:bg-secondary"
          >
            View all posts
            <svg class="ml-2 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</BaseLayout>
