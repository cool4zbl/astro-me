---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import BlogCard from '../../components/BlogCard.astro';

const allPosts = await getCollection('blog');
const recentPosts = allPosts
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const bookshelf = [
  { title: '在读', items: ['《浪潮之巅》', 'Clean Architecture'] },
  { title: '读过', items: ['《三体》', 'The Pragmatic Programmer'] },
  { title: '想读', items: ['《刻意练习》', 'Designing Data-Intensive Applications'] }
];

const musicFavorites = [
  'Nujabes – Luv(sic) Part 3',
  'Bon Iver – Holocene',
  '坂本龙一 – Merry Christmas Mr. Lawrence',
  'The 1975 – About You'
];

const hobbyPhotos = [
  {
    src: '/placeholder.jpg',
    alt: '清晨跑步',
    caption: 'Workout · 记住跑后的呼吸节奏。'
  },
  {
    src: '/placeholder-user.jpg',
    alt: '厨房料理',
    caption: 'Cooking · 在香味里慢慢复盘一天。'
  },
  {
    src: '/placeholder.svg?height=220&width=320',
    alt: '街头摄影',
    caption: 'Photography · 喜欢光影碰撞的瞬间。'
  }
];
---

<BaseLayout 
  title="我的博客 - 全栈开发者"
  description="记录关于工程、生活节奏与自我更新的想法。"
>
  <Header />
  
  <main class="flex-1">
    <section class="section-padding bg-gradient-to-br from-background via-muted/20 to-background">
      <div class="container-width">
        <div class="animate-fade-in mx-auto max-w-3xl space-y-6 text-left sm:text-center">
          <span class="inline-flex items-center gap-2 rounded-full bg-primary/10 px-4 py-2 text-xs font-medium uppercase tracking-[0.25em] text-primary">
            calm engineering · 日常记录
          </span>
          <h1 class="text-4xl font-bold leading-tight text-foreground sm:text-5xl">
            你好，我是喜欢稳步前进的全栈开发者。
          </h1>
          <p class="text-base leading-relaxed text-muted-foreground sm:text-lg">
            每天和 Java / Spring 打交道，整理接口、补全文档，也把小小的 UX 细节调到顺手。偶尔写点文字，让经验有出处。
          </p>
          <div class="flex flex-wrap items-center gap-3 sm:justify-center">
            <a
              href="/zh/blog"
              class="inline-flex items-center rounded-full bg-primary px-5 py-2.5 text-sm font-semibold text-primary-foreground shadow-sm transition hover:bg-primary/90"
            >
              阅读博客
            </a>
            <a
              href="/zh/projects"
              class="inline-flex items-center rounded-full border border-primary/30 px-5 py-2.5 text-sm font-semibold text-primary transition hover:bg-primary/10"
            >
              查看项目 <span aria-hidden="true" class="ml-2">→</span>
            </a>
          </div>
        </div>
      </div>
    </section>

    <section class="section-padding">
      <div class="container-width">
        <div class="grid items-center gap-12 lg:grid-cols-2 lg:gap-16">
          <div class="space-y-3 text-sm leading-relaxed text-muted-foreground sm:text-base">
            <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
              关于我
            </h2>
            <p>
              主攻后端架构与 API 设计，习惯把复杂需求拆解成小节奏可执行的任务。喜欢把监控、文档和自动化流程提前铺好，让团队更安心。
            </p>
            <p>
              面对问题先写出假设，再验证，再沉淀。写出来的东西就是团 队的共同语言，也能帮未来的自己少踩坑。
            </p>
            <p>
              不写代码时，我在读书做摘录、整理歌单或拍照记录光线——这些都是让我保持好奇的方式。
            </p>
          </div>
          <div class="relative">
            <div class="aspect-square rounded-2xl bg-gradient-primary p-8 shadow-2xl">
              <div class="flex h-full w-full items-center justify-center rounded-xl bg-background/10 backdrop-blur-sm">
                <img 
                  src="/placeholder.svg?height=300&width=300"
                  alt="开发者肖像占位"
                  class="rounded-xl shadow-lg"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section-padding bg-muted/30">
      <div class="container-width">
        <div class="mb-12 space-y-3 text-center">
          <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">信念与原则</h2>
          <p class="mx-auto max-w-2xl text-sm leading-relaxed text-muted-foreground sm:text-base">
            写给自己看的四个提醒：写清楚、学不停、坚持做用户想要的东西、慢就是快。
          </p>
        </div>

        <div class="grid gap-6 md:grid-cols-2">
          <div class="rounded-xl border bg-card p-6 shadow-sm">
            <div class="flex items-start space-x-4">
              <div class="flex-shrink-0">
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary/10">
                  <svg class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                  </svg>
                </div>
              </div>
              <div>
                <h3 class="text-lg font-semibold text-card-foreground mb-2">代码是沟通</h3>
                <p class="text-muted-foreground">
                  清晰的命名和注释，是写给未来队友和未来自己的信件。
                </p>
              </div>
            </div>
          </div>

          <div class="rounded-xl border bg-card p-6 shadow-sm">
            <div class="flex items-start space-x-4">
              <div class="flex-shrink-0">
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary/10">
                  <svg class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                  </svg>
                </div>
              </div>
              <div>
                <h3 class="text-lg font-semibold text-card-foreground mb-2">持续学习</h3>
                <p class="text-muted-foreground">
                  技术迭代很快，保持好奇心和刻意练习才是核心竞争力。
                </p>
              </div>
            </div>
          </div>

          <div class="rounded-xl border bg-card p-6 shadow-sm">
            <div class="flex items-start space-x-4">
              <div class="flex-shrink-0">
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary/10">
                  <svg class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" />
                  </svg>
                </div>
              </div>
              <div>
                <h3 class="text-lg font-semibold text-card-foreground mb-2">用户视角</h3>
                <p class="text-muted-foreground">
                  产品要好用，技术才有意义。先想用户，再定方案。
                </p>
              </div>
            </div>
          </div>

          <div class="rounded-xl border bg-card p-6 shadow-sm">
            <div class="flex items-start space-x-4">
              <div class="flex-shrink-0">
                <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary/10">
                  <svg class="h-5 w-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m8 6V9a2 2 0 00-2-2H10a2 2 0 00-2 2v3.1M16 20h4v-4h-4v4z" />
                  </svg>
                </div>
              </div>
              <div>
                <h3 class="text-lg font-semibold text-card-foreground mb-2">慢就是快</h3>
                <p class="text-muted-foreground">
                  稳定输出比爆发更重要，把节奏打磨得舒服一点。
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section-padding">
      <div class="container-width space-y-12">
        <div class="space-y-3 text-center">
          <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">读书 · 音乐 · 运动 · 拍照</h2>
          <p class="mx-auto max-w-2xl text-sm leading-relaxed text-muted-foreground sm:text-base">
            工作之外的充电方式：阅读带来视角，音乐调节节奏，运动稳定状态，摄影保存生活的细节。
          </p>
        </div>

        <div class="grid gap-6 lg:grid-cols-3">
          <div class="rounded-2xl border bg-card/80 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-semibold text-foreground">书架</h3>
              <span class="text-xs uppercase tracking-wide text-primary/70">notes</span>
            </div>
            <div class="mt-5 space-y-4 text-sm text-muted-foreground">
              {bookshelf.map((shelf) => (
                <div class="rounded-xl bg-muted/60 p-4">
                  <p class="text-xs uppercase tracking-wide text-primary/70">{shelf.title}</p>
                  <ul class="mt-2 space-y-1 text-foreground">
                    {shelf.items.map((item) => (
                      <li class="flex items-center gap-2 text-sm">
                        <span class="h-1.5 w-1.5 rounded-full bg-primary"></span>
                        {item}
                      </li>
                    ))}
                  </ul>
                </div>
              ))}
            </div>
          </div>

          <div class="rounded-2xl border bg-card/80 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-semibold text-foreground">音乐</h3>
              <span class="text-xs uppercase tracking-wide text-primary/70">daily vibe</span>
            </div>
            <p class="mt-4 text-sm text-muted-foreground">
              一些适合循环播放的歌曲，陪伴早晨、深夜和路途。
            </p>
            <ul class="mt-5 grid gap-3 text-sm text-foreground">
              {musicFavorites.map((track) => (
                <li class="flex items-center justify-between gap-3 rounded-full border border-primary/30 px-4 py-2">
                  <span class="truncate">{track}</span>
                  <span class="text-xs text-primary/70">loop</span>
                </li>
              ))}
            </ul>
          </div>

          <div class="rounded-2xl border bg-card/80 p-6 shadow-sm">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-semibold text-foreground">其他爱好</h3>
              <span class="text-xs uppercase tracking-wide text-primary/70">snapshots</span>
            </div>
            <div class="mt-5 space-y-4">
              {hobbyPhotos.map((photo) => (
                <figure class="overflow-hidden rounded-xl bg-muted/60">
                  <img src={photo.src} alt={photo.alt} class="h-28 w-full object-cover" />
                  <figcaption class="space-y-1 p-3">
                    <p class="text-sm font-medium text-foreground">{photo.alt}</p>
                    <p class="text-xs leading-relaxed text-muted-foreground">{photo.caption}</p>
                  </figcaption>
                </figure>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section-padding">
      <div class="container-width">
        <div class="mb-12 space-y-3 text-center">
          <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">最新文章</h2>
          <p class="mx-auto max-w-2xl text-sm leading-relaxed text-muted-foreground sm:text-base">
            最近关于工程实践、架构思考与学习方法的记录。
          </p>
        </div>
        <div class="space-y-16">
          {recentPosts.map((post) => (
            <BlogCard post={post} />
          ))}
        </div>
        <div class="mt-10 text-center">
          <a
            href="/zh/blog"
            class="inline-flex items-center rounded-full border border-secondary px-5 py-2.5 text-sm font-semibold text-secondary-foreground shadow-sm transition hover:bg-secondary"
          >
            查看所有文章
            <svg class="ml-2 h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</BaseLayout>
