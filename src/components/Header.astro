---
import ThemeToggle from './ThemeToggle.astro';
import { getLangFromUrl, getTranslations } from '../i18n/config';

const lang = getLangFromUrl(Astro.url);
const t = getTranslations(lang);
---

<header class="sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
  <div class="container mx-auto flex h-14 items-center justify-between px-4">
    <div class="flex items-center space-x-2">
      <a href="/" class="flex items-center space-x-2">
        <span class="text-xl font-bold">我的博客</span>
      </a>
    </div>
    
    <nav class="flex items-center space-x-6">
      <a href="/" class="text-sm font-medium transition-colors hover:text-primary">
        {t('nav.home')}
      </a>
      <a href="/blog" class="text-sm font-medium transition-colors hover:text-primary">
        {t('nav.blog')}
      </a>
      <a href="/tags" class="text-sm font-medium transition-colors hover:text-primary">
        {t('nav.tags')}
      </a>
      <a href="/search" class="text-sm font-medium transition-colors hover:text-primary">
        {t('nav.search')}
      </a>
      <div class="flex items-center space-x-2">
        <a href="/" class={`text-xs px-2 py-1 rounded ${lang === 'zh' ? 'bg-primary text-primary-foreground' : 'hover:bg-muted'}`}>
          中
        </a>
        <a href="/en" class={`text-xs px-2 py-1 rounded ${lang === 'en' ? 'bg-primary text-primary-foreground' : 'hover:bg-muted'}`}>
          EN
        </a>
      </div>
      <ThemeToggle />
    </nav>
  </div>
</header>
